import { StockData, WeightConfig } from '@/types/stock';
import { scoreStock } from '@/lib/stockScoring';

// Mock IDX stock data with realistic values
const rawStockData = [
  {
    ticker: 'BBCA.JK',
    name: 'Bank Central Asia Tbk',
    sector: 'Financials',
    price: 9825,
    change: 125,
    changePercent: 1.29,
    volume: 12500000,
    marketCap: 1210000000000000,
    der: 0.85,
    roe: 18.5,
    pbv: 4.2,
    pe: 24.5,
    eps: 401,
    beta: 0.95,
    volatility: 1.2,
    avgVolume: 15000000,
    historicalPrices: [9500, 9550, 9600, 9650, 9700, 9750, 9780, 9800, 9825, 9810, 9800, 9780, 9790, 9800, 9825, 9850, 9875, 9900, 9850, 9825],
  },
  {
    ticker: 'BBRI.JK',
    name: 'Bank Rakyat Indonesia Tbk',
    sector: 'Financials',
    price: 5475,
    change: -25,
    changePercent: -0.45,
    volume: 45000000,
    marketCap: 825000000000000,
    der: 0.92,
    roe: 16.8,
    pbv: 2.1,
    pe: 12.5,
    eps: 438,
    beta: 1.05,
    volatility: 1.8,
    avgVolume: 50000000,
    historicalPrices: [5200, 5250, 5300, 5350, 5400, 5450, 5475, 5500, 5475, 5450, 5425, 5400, 5420, 5450, 5475, 5500, 5525, 5500, 5480, 5475],
  },
  {
    ticker: 'TLKM.JK',
    name: 'Telkom Indonesia Tbk',
    sector: 'Telecommunications',
    price: 3860,
    change: 40,
    changePercent: 1.05,
    volume: 25000000,
    marketCap: 382000000000000,
    der: 0.65,
    roe: 21.2,
    pbv: 2.8,
    pe: 13.2,
    eps: 292,
    beta: 0.75,
    volatility: 0.9,
    avgVolume: 30000000,
    historicalPrices: [3700, 3720, 3750, 3780, 3800, 3820, 3840, 3850, 3860, 3870, 3880, 3860, 3850, 3840, 3850, 3860, 3870, 3880, 3865, 3860],
  },
  {
    ticker: 'ASII.JK',
    name: 'Astra International Tbk',
    sector: 'Consumer Discretionary',
    price: 5325,
    change: 75,
    changePercent: 1.43,
    volume: 18000000,
    marketCap: 215000000000000,
    der: 0.78,
    roe: 14.5,
    pbv: 1.4,
    pe: 9.8,
    eps: 543,
    beta: 1.12,
    volatility: 1.5,
    avgVolume: 20000000,
    historicalPrices: [5100, 5150, 5200, 5225, 5250, 5275, 5300, 5310, 5320, 5325, 5330, 5320, 5310, 5300, 5310, 5325, 5350, 5375, 5340, 5325],
  },
  {
    ticker: 'BMRI.JK',
    name: 'Bank Mandiri Tbk',
    sector: 'Financials',
    price: 6425,
    change: -50,
    changePercent: -0.77,
    volume: 32000000,
    marketCap: 598000000000000,
    der: 0.88,
    roe: 15.9,
    pbv: 1.9,
    pe: 11.8,
    eps: 545,
    beta: 1.08,
    volatility: 1.6,
    avgVolume: 35000000,
    historicalPrices: [6200, 6250, 6300, 6350, 6400, 6425, 6450, 6475, 6450, 6425, 6400, 6375, 6380, 6400, 6425, 6450, 6475, 6500, 6450, 6425],
  },
  {
    ticker: 'UNVR.JK',
    name: 'Unilever Indonesia Tbk',
    sector: 'Consumer Staples',
    price: 3420,
    change: -30,
    changePercent: -0.87,
    volume: 8500000,
    marketCap: 130000000000000,
    der: 2.15,
    roe: 85.5,
    pbv: 28.5,
    pe: 33.2,
    eps: 103,
    beta: 0.55,
    volatility: 0.8,
    avgVolume: 10000000,
    historicalPrices: [3500, 3480, 3460, 3450, 3440, 3430, 3420, 3425, 3430, 3420, 3410, 3400, 3410, 3420, 3430, 3440, 3435, 3425, 3420, 3420],
  },
  {
    ticker: 'ICBP.JK',
    name: 'Indofood CBP Sukses Makmur',
    sector: 'Consumer Staples',
    price: 11225,
    change: 175,
    changePercent: 1.58,
    volume: 5200000,
    marketCap: 131000000000000,
    der: 0.42,
    roe: 17.8,
    pbv: 4.5,
    pe: 25.3,
    eps: 444,
    beta: 0.68,
    volatility: 1.1,
    avgVolume: 6000000,
    historicalPrices: [10800, 10850, 10900, 10950, 11000, 11050, 11100, 11150, 11175, 11200, 11225, 11200, 11175, 11150, 11175, 11200, 11225, 11250, 11230, 11225],
  },
  {
    ticker: 'GOTO.JK',
    name: 'GoTo Gojek Tokopedia Tbk',
    sector: 'Technology',
    price: 76,
    change: 4,
    changePercent: 5.56,
    volume: 850000000,
    marketCap: 89000000000000,
    der: 0.25,
    roe: -15.2,
    pbv: 0.65,
    pe: -5.2,
    eps: -14.6,
    beta: 1.85,
    volatility: 4.5,
    avgVolume: 700000000,
    historicalPrices: [68, 70, 72, 74, 73, 72, 74, 76, 78, 80, 78, 76, 74, 72, 74, 76, 78, 80, 77, 76],
  },
  {
    ticker: 'ANTM.JK',
    name: 'Aneka Tambang Tbk',
    sector: 'Materials',
    price: 1825,
    change: 45,
    changePercent: 2.53,
    volume: 65000000,
    marketCap: 43800000000000,
    der: 0.35,
    roe: 12.8,
    pbv: 1.2,
    pe: 9.5,
    eps: 192,
    beta: 1.45,
    volatility: 3.2,
    avgVolume: 55000000,
    historicalPrices: [1700, 1720, 1750, 1780, 1800, 1820, 1840, 1860, 1880, 1850, 1820, 1800, 1820, 1840, 1860, 1880, 1850, 1830, 1825, 1825],
  },
  {
    ticker: 'INDF.JK',
    name: 'Indofood Sukses Makmur Tbk',
    sector: 'Consumer Staples',
    price: 6675,
    change: 25,
    changePercent: 0.38,
    volume: 7800000,
    marketCap: 58500000000000,
    der: 0.95,
    roe: 11.2,
    pbv: 1.1,
    pe: 9.8,
    eps: 681,
    beta: 0.82,
    volatility: 1.3,
    avgVolume: 8500000,
    historicalPrices: [6500, 6520, 6550, 6580, 6600, 6625, 6650, 6675, 6700, 6680, 6660, 6640, 6650, 6660, 6675, 6690, 6700, 6685, 6675, 6675],
  },
  {
    ticker: 'ADRO.JK',
    name: 'Adaro Energy Indonesia Tbk',
    sector: 'Energy',
    price: 2740,
    change: -60,
    changePercent: -2.14,
    volume: 42000000,
    marketCap: 85500000000000,
    der: 0.28,
    roe: 28.5,
    pbv: 1.05,
    pe: 3.7,
    eps: 740,
    beta: 1.55,
    volatility: 2.8,
    avgVolume: 38000000,
    historicalPrices: [2900, 2880, 2860, 2840, 2820, 2800, 2780, 2760, 2750, 2740, 2730, 2720, 2730, 2740, 2750, 2760, 2750, 2745, 2740, 2740],
  },
  {
    ticker: 'PTBA.JK',
    name: 'Bukit Asam Tbk',
    sector: 'Energy',
    price: 3050,
    change: 30,
    changePercent: 0.99,
    volume: 12500000,
    marketCap: 35000000000000,
    der: 0.32,
    roe: 32.5,
    pbv: 1.8,
    pe: 5.5,
    eps: 555,
    beta: 1.38,
    volatility: 2.5,
    avgVolume: 14000000,
    historicalPrices: [2900, 2920, 2950, 2980, 3000, 3020, 3040, 3050, 3060, 3070, 3060, 3050, 3040, 3030, 3040, 3050, 3060, 3055, 3050, 3050],
  },
  {
    ticker: 'KLBF.JK',
    name: 'Kalbe Farma Tbk',
    sector: 'Healthcare',
    price: 1595,
    change: 15,
    changePercent: 0.95,
    volume: 18500000,
    marketCap: 74700000000000,
    der: 0.18,
    roe: 15.2,
    pbv: 2.9,
    pe: 19.2,
    eps: 83,
    beta: 0.72,
    volatility: 1.0,
    avgVolume: 20000000,
    historicalPrices: [1550, 1560, 1570, 1575, 1580, 1585, 1590, 1595, 1600, 1595, 1590, 1585, 1590, 1595, 1600, 1605, 1600, 1598, 1595, 1595],
  },
  {
    ticker: 'MYOR.JK',
    name: 'Mayora Indah Tbk',
    sector: 'Consumer Staples',
    price: 2430,
    change: 40,
    changePercent: 1.67,
    volume: 9200000,
    marketCap: 54200000000000,
    der: 0.72,
    roe: 19.8,
    pbv: 3.8,
    pe: 19.2,
    eps: 127,
    beta: 0.88,
    volatility: 1.4,
    avgVolume: 10000000,
    historicalPrices: [2300, 2320, 2350, 2370, 2390, 2400, 2410, 2420, 2425, 2430, 2435, 2430, 2425, 2420, 2425, 2430, 2435, 2432, 2430, 2430],
  },
  {
    ticker: 'MDKA.JK',
    name: 'Merdeka Copper Gold Tbk',
    sector: 'Materials',
    price: 2650,
    change: 80,
    changePercent: 3.11,
    volume: 28000000,
    marketCap: 62800000000000,
    der: 0.85,
    roe: 8.5,
    pbv: 2.2,
    pe: 26.5,
    eps: 100,
    beta: 1.62,
    volatility: 3.5,
    avgVolume: 25000000,
    historicalPrices: [2450, 2480, 2510, 2540, 2570, 2600, 2620, 2640, 2650, 2660, 2650, 2640, 2630, 2640, 2650, 2660, 2670, 2655, 2650, 2650],
  },
];

const defaultBenchmarks = {
  derRange: [0, 3] as [number, number],
  roeRange: [-20, 40] as [number, number],
  pbvRange: [0, 10] as [number, number],
  peRange: [-10, 40] as [number, number],
  volatilityRange: [0, 5] as [number, number],
  betaRange: [0.5, 2] as [number, number],
  volumeRange: [1000000, 100000000] as [number, number],
};

export function getStockData(weights: WeightConfig): StockData[] {
  return rawStockData.map(stock => scoreStock(stock, weights, defaultBenchmarks));
}

export function getSectors(): string[] {
  return [...new Set(rawStockData.map(s => s.sector))];
}
